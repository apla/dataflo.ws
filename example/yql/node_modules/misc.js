var Buffer = require('buffer');

module.exports = {
	stripTags: function (text) {
		var Entities = {
			'<': '&lt;',
			'>': '&rt;'
		};
		var tagsRe = new RegExp(Object.keys(Entities).join('|'), 'g');
		var toEntity = function (s) { return Entities[s]; };
		return text.replace(tagsRe, toEntity);
	},

	formatData: function (response) {
		var json = response.data.toString();
		var data = JSON.parse(json);
		var results = data.query.results;

		if (results) {
			var items = results.entities.entity;
			if (Array != items.constructor) {
				items = [ items ];
			}
		} else {
			items = -1;
		}

		return items;
	}
};
